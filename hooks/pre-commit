#!/bin/sh
echo "Synchronisation des fichiers .ipynb vers _ntb.py avant commit..."

# Vérifier que Jupytext est installé
if ! python -c "import jupytext" &> /dev/null; then
    echo "Erreur : Jupytext n'est pas installé. Installez-le avec 'pip install jupytext'."
    exit 1
fi

# Convertir tous les notebooks et les ajouter
for ipynb_file in *.ipynb; do
    py_file="${ipynb_file%.ipynb}_ntb.py"
    echo "Traitement de $ipynb_file -> $py_file..."
    python -m jupytext --to py "$ipynb_file" --output "$py_file" --update
    git add "$py_file"
done

echo "Synchronisation terminée."

